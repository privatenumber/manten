import{jestExpect as v}from"@jest/expect";let a,f,d,m,y=!0;typeof process<"u"&&({FORCE_COLOR:a,NODE_DISABLE_COLORS:f,NO_COLOR:d,TERM:m}=process.env||{},y=process.stdout&&process.stdout.isTTY);const E={enabled:!f&&d==null&&m!=="dumb"&&(a!=null&&a!=="0"||y)};function w(e,t){let s=new RegExp(`\\x1b\\[${t}m`,"g"),n=`\x1B[${e}m`,c=`\x1B[${t}m`;return function(r){return!E.enabled||r==null?r:n+(~(""+r).indexOf(c)?r.replace(s,c+n):r)+c}}const S=w(31,39),g=w(32,39),x=g("\u2714"),C=S("\u2716"),I=async(e,t)=>new Promise((s,n)=>{t.timeoutId=setTimeout(()=>{n(new Error(`Timeout: ${e}ms`))},e)});function p(e,t){return async function(n,c,r){e&&(n=`${e} ${n}`);const u=(async()=>{try{if(r){const o={timeoutId:void 0};try{await Promise.race([c(),I(r,o)])}finally{clearTimeout(o.timeoutId)}}else await c();console.log(x,n)}catch(o){console.error(C,n),o&&typeof o=="object"&&"matcherResult"in o&&o.constructor.name==="JestAssertionError"&&delete o.matcherResult,console.error(o),process.exitCode=1}})();t&&t.push(u),await u}}async function P(e){for(;e.length>0;){const t=e.splice(0);await Promise.all(t)}}function T(e,t){return async function(n,c){e&&(n=`${e} ${n}`);const r=[];try{const u=(async()=>{const o={test:p(`${n} \u203A`,r),describe:T(`${n} \u203A`,r),runTestSuite:($,...R)=>{const l=(async()=>{let i=await $;return"default"in i&&(i=i.default),i.apply(o,R)})();return r.push(l),l}};await c(o),await P(r)})();t&&t.push(u),await u}catch(u){console.error(u)}}}const b=p(),h=T(),O={describe:h,test:b,runTestSuite:async(e,...t)=>{let s=await e;return"default"in s&&(s=s.default),"default"in s&&(s=s.default),s.apply(O,t)}};function A(e){return function(...t){return e(this||O,...t)}}export{h as describe,v as expect,b as test,A as testSuite};
