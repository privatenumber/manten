import{default as I}from"expect";let a,f,d,m,w=!0;typeof process<"u"&&({FORCE_COLOR:a,NODE_DISABLE_COLORS:f,NO_COLOR:d,TERM:m}=process.env||{},w=process.stdout&&process.stdout.isTTY);const S={enabled:!f&&d==null&&m!=="dumb"&&(a!=null&&a!=="0"||w)};function p(e,t){let s=new RegExp(`\\x1b\\[${t}m`,"g"),r=`\x1B[${e}m`,c=`\x1B[${t}m`;return function(n){return!S.enabled||n==null?n:r+(~(""+n).indexOf(c)?n.replace(s,c+r):n)+c}}const g=p(31,39),E=p(32,39),x=E("\u2714"),C=g("\u2716"),P=e=>new Promise((t,s)=>{setTimeout(()=>{s(new Error(`Timeout: ${e}ms`))},e)});function y(e,t){return async function(r,c,n){e&&(r=`${e} ${r}`);const u=(async()=>{try{n?await Promise.race([c(),P(n)]):await c(),console.log(x,r)}catch(o){console.error(C,r),o&&typeof o=="object"&&"matcherResult"in o&&o.constructor.name==="JestAssertionError"&&delete o.matcherResult,console.error(o),process.exitCode=1}})();t&&t.push(u),await u}}async function A(e){for(;e.length>0;){const t=e.splice(0);await Promise.all(t)}}function b(e,t){return async function(r,c){e&&(r=`${e} ${r}`);const n=[];try{const u=(async()=>{const o={test:y(`${r} \u203A`,n),describe:b(`${r} \u203A`,n),runTestSuite:($,...R)=>{const l=(async()=>{let i=await $;return"default"in i&&(i=i.default),i.apply(o,R)})();return n.push(l),l}};await c(o),await A(n)})();t&&t.push(u),await u}catch(u){console.error(u)}}}const h=y(),T=b(),O={describe:T,test:h,runTestSuite:async(e,...t)=>{let s=await e;return"default"in s&&(s=s.default),s.apply(O,t)}};function L(e){return function(...t){return e(this||O,...t)}}export{T as describe,I as expect,h as test,L as testSuite};
